(window.webpackJsonp=window.webpackJsonp||[]).push([[185],{544:function(t,s,a){"use strict";a.r(s);var e=a(44),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("[toc]")]),t._v(" "),a("h1",{attrs:{id:"记录一下开发过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#记录一下开发过程"}},[t._v("#")]),t._v(" 记录一下开发过程")]),t._v(" "),a("h3",{attrs:{id:"style"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#style"}},[t._v("#")]),t._v(" Style")]),t._v(" "),a("h4",{attrs:{id:"css-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-loader"}},[t._v("#")]),t._v(" css-loader")]),t._v(" "),a("p",[t._v("css-loader 用于处理 js 中 import .css 文件。"),a("br"),t._v("\n@import 导入 node_modules 的样式时需要加前缀 "),a("code",[t._v("~")]),t._v("，例如"),a("code",[t._v("@import url(~antd/dist/antd.css);")]),a("br"),t._v("\n只有将 "),a("code",[t._v("options.modules")]),t._v(" 设置为 true，才能写"),a("code",[t._v("import styles from './index.less';")]),a("br"),t._v("\ncss的模块化功能默认为auto，即只有以.module结尾的文件会被认为是模块化。"),a("br"),t._v("\n可选值："),a("code",[t._v("auto: true|false")]),t._v("、"),a("code",[t._v("mode: local|global|pure")]),t._v("、"),a("code",[t._v("modules: true|false")]),t._v("、"),a("code",[t._v("、")]),a("br"),t._v("\nmode默认为local，即默认模块化，想要非模块化要使用global。设置为global则模块化需要单独指定。"),a("a",{attrs:{href:"https://github.com/webpack-contrib/css-loader/issues/985",target:"_blank",rel:"noopener noreferrer"}},[t._v("pure只允许一个global模式"),a("OutboundLink")],1),t._v("，可以使用函数根据文件名进行更多判断设置，感觉可能会有应用场景，"),a("a",{attrs:{href:"https://webpack.docschina.org/loaders/css-loader/#localidentname",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考这往上翻"),a("OutboundLink")],1),a("br"),t._v("\n开启模块化 css 后，模块类名与非模块类名的"),a("a",{attrs:{href:"https://webpack.docschina.org/loaders/css-loader/#modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("写法"),a("OutboundLink")],1),t._v("：")]),t._v(" "),a("div",{staticClass:"language-less extra-class"},[a("pre",{pre:!0,attrs:{class:"language-less"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(":global")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".g-title")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 22px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".app")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #222"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("min-width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100vw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("min-height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100vh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #fff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(":local .text")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@main-color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),a("p",[t._v("类名还能自动驼峰等许多功能")]),t._v(" "),a("h4",{attrs:{id:"style-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#style-loader"}},[t._v("#")]),t._v(" style-loader")]),t._v(" "),a("p",[t._v("把 CSS 插入到 DOM 中"),a("br"),t._v("\n功能：")]),t._v(" "),a("ul",[a("li",[t._v("配置把 styles 插入到 DOM 中的方式")]),t._v(" "),a("li",[t._v("添加自定义属性到插入的标签中")]),t._v(" "),a("li",[t._v("在指定的位置插入标签")]),t._v(" "),a("li",[t._v("等")])]),t._v(" "),a("h4",{attrs:{id:"css-module-in-typescript"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-module-in-typescript"}},[t._v("#")]),t._v(" CSS module in Typescript")]),t._v(" "),a("p",[t._v("使用 @teamsupercell/typings-for-css-modules-loader 可以自动生成 less 的 d.ts 声明，但会生成许多冗余文件，我使用的vscode插件实现的。"),a("a",{attrs:{href:"https://juejin.cn/post/6844903560056930311",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1),a("br"),t._v("\n使用 loader 每次生成 d.ts 时 webpack 的配置")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@teamsupercell/typings-for-css-modules-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    verifyOnly"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    disableLocalsExport"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("最终使用的")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// typings.d.ts")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 代码补全使用 vscode 插件 CSS Modules")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("declare")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.css'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("declare")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.less'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"eslint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eslint"}},[t._v("#")]),t._v(" eslint")]),t._v(" "),a("h4",{attrs:{id:"安装步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤"}},[t._v("#")]),t._v(" 安装步骤")]),t._v(" "),a("p",[t._v("1、安装 eslint："),a("code",[t._v("yarn add --dev eslint")])]),t._v(" "),a("p",[t._v("2、生成 默认配置文件："),a("code",[t._v("npx eslint --init")]),t._v("，生成默认配置的时候会提示安装的依赖：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("✔ How would you like to use ESLint? · style\n✔ What type of modules does your project use? · esm\n✔ Which framework does your project use? · react\n✔ Does your project use TypeScript? · Yes\n✔ Where does your code run? · browser\n✔ How would you like to define a style for your project? · guide\n✔ Which style guide do you want to follow? · airbnb\n✔ What format do you want your config file to be in? · JavaScript\n✔ Would you like to install them now with npm? · No / Yes\n")])])]),a("p",[t._v("手动或自动安装依赖。")]),t._v(" "),a("ul",[a("li",[t._v("eslint-plugin-react📌")]),t._v(" "),a("li",[t._v("@typescript-eslint/eslint-plugin📌")]),t._v(" "),a("li",[t._v("eslint-config-airbnb📌")]),t._v(" "),a("li",[t._v("eslint-plugin-import📌")]),t._v(" "),a("li",[t._v("eslint-plugin-jsx-a11y📌")]),t._v(" "),a("li",[t._v("eslint-plugin-react-hooks📌")]),t._v(" "),a("li",[t._v("@typescript-eslint/parser📌")])]),t._v(" "),a("p",[t._v("生成的配置文件")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"env"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"browser"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"es2021"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"extends"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"plugin:react/recommended"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"airbnb"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"parser"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@typescript-eslint/parser"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"parserOptions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecmaFeatures"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jsx"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecmaVersion"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sourceType"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"module"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@typescript-eslint"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("3、IDE 配置 vscode 需要安装 ESLint 插件")]),t._v(" "),a("p",[t._v("4、进行配置主要是修改规范集：extends，plugins")]),t._v(" "),a("p",[t._v("5、自定义配置修改 rules")]),t._v(" "),a("h4",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[t._v("可以使用 "),a("a",{attrs:{href:"https://cn.eslint.org/docs/user-guide/configuring#specifying-globals",target:"_blank",rel:"noopener noreferrer"}},[t._v("globals"),a("OutboundLink")],1),t._v(" 定义全局变量，否则 eslint 报错。"),a("br"),t._v("\n指定插件时，可省略前缀 eslint-plugin-。"),a("br"),t._v("\n规则：")]),t._v(" "),a("ul",[a("li",[t._v("off 0")]),t._v(" "),a("li",[t._v("warn 1")]),t._v(" "),a("li",[t._v("error 2")])]),t._v(" "),a("p",[t._v("整个文件不进行 eslint 警告提示："),a("code",[t._v("/* eslint-disable */")]),a("br"),t._v(" "),a("a",{attrs:{href:"https://cn.eslint.org/docs/user-guide/configuring#disabling-rules-only-for-a-group-of-files",target:"_blank",rel:"noopener noreferrer"}},[t._v("overrides"),a("OutboundLink")],1),t._v(" 可以禁止一组文件进行检查。")]),t._v(" "),a("h3",{attrs:{id:"babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[t._v("#")]),t._v(" babel")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://babel.docschina.org/docs/en/presets/#preset-%E9%A1%BA%E5%BA%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("Preset 顺序是相反的"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://stackoverflow.com/a/52323181/10422553",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel 7 已可以不需要 ts-loader"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://zh-hans.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html#manual-babel-setup",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel 支持运行时不引入react的配置"),a("OutboundLink")],1),t._v("，"),a("a",{attrs:{href:"https://github.com/gatsbyjs/gatsby/issues/28657",target:"_blank",rel:"noopener noreferrer"}},[t._v("github issue也有"),a("OutboundLink")],1)]),t._v(" "),a("h4",{attrs:{id:"ts-loader-与-babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ts-loader-与-babel"}},[t._v("#")]),t._v(" ts-loader 与 babel")]),t._v(" "),a("p",[t._v("起初有以下几种方案")]),t._v(" "),a("ol",[a("li",[t._v("typescript + ts-loader")]),t._v(" "),a("li",[t._v("ts-loader + babel-loader + fork-ts-checker-webpack-plugin")]),t._v(" "),a("li",[t._v("typescript + ts-loader + awesome-typescript-loader")])]),t._v(" "),a("p",[t._v("typescript 自身带有语言转换和类型检查的功能，默认两者都执行，所以可能会慢，所以才有了第三种方案，typescript 仅进行语法转换，awesome-typescript-loader 用于")]),t._v(" "),a("p",[t._v("TODO:"),a("br"),t._v("\nhttps://juejin.cn/post/6844904052094926855"),a("br"),t._v("\nhttps://www.cnblogs.com/vvjiang/p/12057811.html"),a("br"),t._v("\nhttps://juejin.cn/post/6844903792865984520")]),t._v(" "),a("h4",{attrs:{id:"如何安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何安装"}},[t._v("#")]),t._v(" 如何安装")]),t._v(" "),a("p",[t._v("1、"),a("a",{attrs:{href:"https://babeljs.io/setup",target:"_blank",rel:"noopener noreferrer"}},[t._v("首先看官方指引"),a("OutboundLink")],1),a("br"),t._v("\n安装")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("babel-loader")]),t._v("：webpack 支持")]),t._v(" "),a("li",[a("code",[t._v("@babel/core")]),t._v("：Babel 编译器核心")])]),t._v(" "),a("p",[t._v("2、修改 webpack 配置"),a("br"),t._v("\n注意 ts-loader 和 babel-loader 只可选其一。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.tsx?$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  exclude"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("3、安装语法支持")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("@babel/preset-env")]),t._v(": ECMAScript 语法支持")]),t._v(" "),a("li",[a("code",[t._v("@babel/preset-react")]),t._v(": JSX 语法支持")]),t._v(" "),a("li",[a("code",[t._v("@babel/preset-typescript")]),t._v(": ts 语法支持")])]),t._v(" "),a("p",[t._v("配置文件"),a("br"),t._v("\nbabel.config.json，解析从后向前")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-typescript"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"runtime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"automatic"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("4、配置支持版本"),a("br"),t._v("\n在默认配置的基础上不支持 IE11"),a("br"),t._v("\nhttps://github.com/browserslist/browserslist")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# .browserslistrc\n> 0.5%\nlast 2 versions \nFirefox ESR\nnot IE 11\nnot dead\n")])])]),a("h4",{attrs:{id:"问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("ul",[a("li",[t._v("[ ] antd-pro ts版本如何编译成 js 版本的？")]),t._v(" "),a("li",[t._v("[ ] 如何加入 stage 的支持？可不可加？")]),t._v(" "),a("li",[t._v("[ ] 是不是 import 的一些语法不支持？")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[t._v("#")]),t._v(" 环境变量")]),t._v(" "),a("p",[t._v("能浏览器环境下读取到环境变量的值，靠的是 "),a("code",[t._v("webpack --mode=development")]),t._v("，在 node 环境下读取到环境变量的值，靠的是 "),a("code",[t._v("webpack --env=production")]),t._v("。"),a("br"),t._v("\n不同操作系统传入环境变量的差异可能导致报错，使用cross-env。")]),t._v(" "),a("p",[t._v("待办：")]),t._v(" "),a("ul",[a("li",[t._v("[ ] umi 及 vue-cli 都可读取文件内的环境变量，可加入该功能")])]),t._v(" "),a("p",[t._v("参考："),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.cn/post/6844904023791796237#heading-7",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 设置环境变量的误区"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("其他:"),a("br"),t._v(" "),a("a",{attrs:{href:"https://ejs.co/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ejs 的文档"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://css-tricks.com/emojis-as-favicons/",target:"_blank",rel:"noopener noreferrer"}},[t._v("将 Emijo 设置为 icon"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);