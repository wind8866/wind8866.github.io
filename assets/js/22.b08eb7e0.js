(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{384:function(t,a,s){"use strict";s.r(a);var e=s(44),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("团队中如果不同的项目，不同的人员可能在接口设计上有许多不统一的地方。导致了开发效率低下的问题。"),s("br"),t._v("\n由于我在工作中遇到了，所以整理下来，说一说自己的一些看法。")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"怎样进行接口规范化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#怎样进行接口规范化"}},[t._v("#")]),t._v(" 怎样进行接口规范化")]),t._v(" "),s("p",[t._v("因为每个人对自己使用语言有不同的理解、HTTP协议熟悉程度不同、思维逻辑、开发经验不一样。对接口规范有想法的人应该提出自己的观点，给出自己的理由。让别人去评价，讨论出一套统一的规则，最终统一成一个内部的标准。"),s("br"),t._v("\n形成统一标准后由相关人员写出示例。例如前端要对GET请求针对"),s("code",[t._v("jQuery.ajax")]),t._v("、"),s("code",[t._v("fetch")]),t._v("、"),s("code",[t._v("axios")]),t._v("等请求库给出示例代码。以后直接参照示例代码进行开发。")]),t._v(" "),s("p",[t._v("由于每个项目在定义接口时有许多不同的方式，我根据以往的经验，从请求方法、请求头、请求体、响应状态码、响应体等几个方面对接口的规范说说自己的看法。")]),t._v(" "),s("h2",{attrs:{id:"我对标准的理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我对标准的理解"}},[t._v("#")]),t._v(" 我对标准的理解")]),t._v(" "),s("p",[t._v("我们不同的项目使用的请求方式大概有两种：")]),t._v(" "),s("ul",[s("li",[t._v("GET、POST")]),t._v(" "),s("li",[t._v("GET、POST、PUT、DELETE")])]),t._v(" "),s("p",[t._v("如果使用前者，PSOT的URL中应该指明要执行的动作，而后者不需要指定。")]),t._v(" "),s("div",{staticClass:"language-HTTP extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/api/user/add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/api/user/set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/api/user/delete")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v("\n\n# 这里例子中约定PUT是新增，POST是修改\n"),s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/api/user")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("PUT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/api/user")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("DELETE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/api/user")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v("\n")])])]),s("p",[t._v("至于使用前者还是后者，我更倾向于前者。"),s("br"),t._v("\n如果使用后者时，什么情况下使用PSOT、什么情况下使用PUT，搜索到了到了一些"),s("a",{attrs:{href:"https://stackoverflow.com/questions/630453/put-vs-post-in-rest",target:"_blank",rel:"noopener noreferrer"}},[t._v("资料"),s("OutboundLink")],1),t._v("，但看不懂。")]),t._v(" "),s("h3",{attrs:{id:"接口url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接口url"}},[t._v("#")]),t._v(" 接口URL")]),t._v(" "),s("p",[t._v("接口URL应该见名知意，有一定的规律。"),s("br"),t._v("\n这里我不太懂，就不做过多赘述。")]),t._v(" "),s("h3",{attrs:{id:"数据类型的约定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据类型的约定"}},[t._v("#")]),t._v(" 数据类型的约定")]),t._v(" "),s("p",[t._v("前端请求中不应该有"),s("code",[t._v("undefined")]),t._v("，因为后端不支持(json也不支持)该数据类型。"),s("br"),t._v("\n如果"),s("code",[t._v("Content-Type")]),t._v("为"),s("code",[t._v("multipart/form-data")]),t._v("，前端不应该传null，因为会被转化成字符串，后端不能判断出这是用户输入还是null类型。")]),t._v(" "),s("p",[t._v("每个项目应该约定请求时下面这些数据代表什么意思")]),t._v(" "),s("ul",[s("li",[t._v("null数据类型表示什么")]),t._v(" "),s("li",[t._v("空字符串类型表示什么")])]),t._v(" "),s("h2",{attrs:{id:"get请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get请求"}},[t._v("#")]),t._v(" GET请求")]),t._v(" "),s("h3",{attrs:{id:"作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[t._v("#")]),t._v(" 作用")]),t._v(" "),s("p",[t._v("GET请求应该读取数据，不应该产生任何的“副作用”操作。"),s("br"),t._v("\n这里要注意一点浏览器对"),s("a",{attrs:{href:"https://github.com/zhongxia245/blog/issues/35",target:"_blank",rel:"noopener noreferrer"}},[t._v("URL长度是有限制的"),s("OutboundLink")],1),t._v("，如果查询的URL长度过长会引起不可预期的后果。可以采用POST/PUT进行查询。")]),t._v(" "),s("h3",{attrs:{id:"方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方式"}},[t._v("#")]),t._v(" 方式")]),t._v(" "),s("p",[t._v("GET请求的参数应该放在请求的URL中而不应该放在请求体中。"),s("br"),t._v("\n例如下面是一个标准的这个GET请求（不相关HTTP头字段已剔除）")]),t._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("GET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/api/user?userId=12345")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Host:")]),t._v(" http://www.example.com\n")])])]),s("h2",{attrs:{id:"post-put-delete请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#post-put-delete请求"}},[t._v("#")]),t._v(" POST/PUT/DELETE请求")]),t._v(" "),s("p",[t._v("这三种请求方法传参数格式都相同，下面以POST为例。"),s("br"),t._v("\nPOST类型使用的方式非常多样，见识过各种各样奇葩的方式，也是耽误时间最长的，严重影响开发进度。这里只讨论我认为标准的方式。")]),t._v(" "),s("h3",{attrs:{id:"作用-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作用-2"}},[t._v("#")]),t._v(" 作用")]),t._v(" "),s("p",[t._v("POST请求用于新增、修改或删除数据，少数情况下用于查询数据。")]),t._v(" "),s("h3",{attrs:{id:"方式-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方式-2"}},[t._v("#")]),t._v(" 方式")]),t._v(" "),s("p",[t._v("POST请求的参数必须放在请求体中。"),s("br"),t._v("\n而POST的请求方式有"),s("a",{attrs:{href:"https://imququ.com/post/four-ways-to-post-data-in-http.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("四种方式"),s("OutboundLink")],1),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("application/x-www-form-urlencoded")]),t._v(" "),s("li",[t._v("multipart/form-data")]),t._v(" "),s("li",[t._v("application/json")]),t._v(" "),s("li",[t._v("text/xml")])]),t._v(" "),s("p",[t._v("这几种方式通过HTTP头中的"),s("code",[t._v("Content-Type")]),t._v("头字段进行控制。")]),t._v(" "),s("h4",{attrs:{id:"multipart-form-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#multipart-form-data"}},[t._v("#")]),t._v(" "),s("code",[t._v("multipart/form-data")])]),t._v(" "),s("p",[t._v("我们现在使用的最多的是"),s("code",[t._v("multipart/form-data")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/api/user/set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Host:")]),t._v(" http://www.example.com\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Type:")]),t._v(" multipart/form-data; boundary=----WebKitFormBoundary2KbanAZwv0mKceX0\n\n------WebKitFormBoundary2KbanAZwv0mKceX0\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Disposition:")]),t._v(' form-data; name="userName"\n\n张三\n------WebKitFormBoundary2KbanAZwv0mKceX0\n'),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Disposition:")]),t._v(' form-data; name="userId"\n\n123456\n------WebKitFormBoundary2KbanAZwv0mKceX0--\n')])])]),s("p",[t._v("这种方式不适合复杂数据类型的传递，例如有个接口需要同时修改多个用户：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    userID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    userName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'张三'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    isAdmin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    userID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("456")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    userName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'李四'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    isAdmin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("那么在POST请求时只能这么做")]),t._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/api/userlist/set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Host:")]),t._v(" http://www.example.com\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Type:")]),t._v(" multipart/form-data; boundary=----WebKitFormBoundary2KbanAZwv0mKceX0\n\n------WebKitFormBoundary2KbanAZwv0mKceX0\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Disposition:")]),t._v(' form-data; name="userID"\n\n123,456\n------WebKitFormBoundary2KbanAZwv0mKceX0\n'),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Disposition:")]),t._v(' form-data; name="userName"\n\n张三,李四\n------WebKitFormBoundary2KbanAZwv0mKceX0\n'),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Disposition:")]),t._v(' form-data; name="isAdmin"\n\n1,0\n------WebKitFormBoundary2KbanAZwv0mKceX0--\n')])])]),s("p",[t._v("更重要的是"),s("strong",[t._v("这种方式不支持数据类型")]),t._v("，传入的所有格式的数据都会转成字符串类型。后端经常要使用1表示true，需要将数组或对象拆分开。")]),t._v(" "),s("h4",{attrs:{id:"application-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#application-json"}},[t._v("#")]),t._v(" "),s("code",[t._v("application/json")])]),t._v(" "),s("p",[t._v("这是我推荐使用的方式，有效的弥补了"),s("code",[t._v("multipart/form-data")]),t._v("的缺陷。"),s("br"),t._v("\n但不知什么原因现在我们团队基本不使用这种方式。"),s("br"),t._v(" "),s("code",[t._v("application/json")]),t._v("也有一个缺陷就是不支持上传文件（有特殊的方法这里也不建议使用），想上传文件还是使用"),s("code",[t._v("multipart/form-data")]),t._v("。")]),t._v(" "),s("p",[t._v("下面是请求示例")]),t._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/user")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Host:")]),t._v(" http://www.example.com\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Type:")]),t._v(' application/json;charset=utf-8\n\n[{"userID":123,"userName":"张三","isAdmin":true},{"userID":456,"userName":"李四","isAdmin":false}]\n')])])]),s("h2",{attrs:{id:"响应"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#响应"}},[t._v("#")]),t._v(" 响应")]),t._v(" "),s("p",[t._v("不知道服务器对于不同的处理会返回什么样的状态码，这里不做讨论。"),s("br"),t._v("\n我们会返回一个逻辑状态码"),s("code",[t._v("code")]),t._v("与提示信息"),s("code",[t._v("msg")]),t._v("，响应体像下面这样。")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"msg"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"处理成功!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("在此基础上增加一些限制："),s("br"),t._v(" "),s("strong",[t._v("建议data字段始终为对象类型")]),s("br"),t._v("\n易于扩展，例如当前接口是用户列表页，data使用数组。v2版本接口加入了分页查询，就必须使data变为对象类型了。")]),t._v(" "),s("p",[s("strong",[t._v("如果字段为复杂类型，不允许为null")]),s("br"),t._v("\n复杂类型包括数组与对象。"),s("br"),t._v("\n为了方便阅读，这里将json字符串转化为了JS对象。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resBody "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  msg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'处理成功'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    list"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        userName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'张三'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("如果没有数据的时候返回")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resBody "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  msg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'处理成功'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    list"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("这样前端在遍历list时，null会导致代码出错，应该始终保证该字段的数据类型不变，正确返回方式如下。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resBody "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  msg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'处理成功'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    list"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("h2",{attrs:{id:"其他"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),s("p",[t._v("如果你有其他补充或纠正，欢迎👏评论。"),s("br"),t._v("\n文章同时发表在"),s("a",{attrs:{href:"https://segmentfault.com/a/1190000019328137",target:"_blank",rel:"noopener noreferrer"}},[t._v("掘金"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[s("strong",[t._v("参考资料")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE",target:"_blank",rel:"noopener noreferrer"}},[t._v("超文本传输协议"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/HTTP%E5%A4%B4%E5%AD%97%E6%AE%B5",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP头字段"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://imququ.com/post/four-ways-to-post-data-in-http.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("四种常见的 POST 提交数据方式"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.json.org/json-zh.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("介绍JSON"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("strong",[t._v("同时发表在：")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://juejin.im/post/5d08463fe51d45777540fdb3",target:"_blank",rel:"noopener noreferrer"}},[t._v("掘金"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);