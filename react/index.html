<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>文档笔记 | Wind</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="起风了的个人博客与学习笔记">
    
    <link rel="preload" href="/assets/css/0.styles.c1092872.css" as="style"><link rel="preload" href="/assets/js/app.2e3db3d9.js" as="script"><link rel="preload" href="/assets/js/2.65dda3ac.js" as="script"><link rel="preload" href="/assets/js/178.6234883e.js" as="script"><link rel="prefetch" href="/assets/js/10.357b5774.js"><link rel="prefetch" href="/assets/js/100.184cd071.js"><link rel="prefetch" href="/assets/js/101.3866021b.js"><link rel="prefetch" href="/assets/js/102.b6f389c5.js"><link rel="prefetch" href="/assets/js/103.2cb86a45.js"><link rel="prefetch" href="/assets/js/104.8035c95f.js"><link rel="prefetch" href="/assets/js/105.58071765.js"><link rel="prefetch" href="/assets/js/106.e585b16a.js"><link rel="prefetch" href="/assets/js/107.b85532b3.js"><link rel="prefetch" href="/assets/js/108.a353ea24.js"><link rel="prefetch" href="/assets/js/109.b9b30406.js"><link rel="prefetch" href="/assets/js/11.079c2ba9.js"><link rel="prefetch" href="/assets/js/110.0cde913d.js"><link rel="prefetch" href="/assets/js/111.31bdaf1f.js"><link rel="prefetch" href="/assets/js/112.e7193085.js"><link rel="prefetch" href="/assets/js/113.6a815f50.js"><link rel="prefetch" href="/assets/js/114.a826c59d.js"><link rel="prefetch" href="/assets/js/115.1bbd6b0a.js"><link rel="prefetch" href="/assets/js/116.8b100930.js"><link rel="prefetch" href="/assets/js/117.d8e7f686.js"><link rel="prefetch" href="/assets/js/118.7e9f15d0.js"><link rel="prefetch" href="/assets/js/119.89659594.js"><link rel="prefetch" href="/assets/js/12.6a73bcc5.js"><link rel="prefetch" href="/assets/js/120.23d949d4.js"><link rel="prefetch" href="/assets/js/121.989e6869.js"><link rel="prefetch" href="/assets/js/122.5feb9878.js"><link rel="prefetch" href="/assets/js/123.6ea91031.js"><link rel="prefetch" href="/assets/js/124.e6cd6192.js"><link rel="prefetch" href="/assets/js/125.008b851d.js"><link rel="prefetch" href="/assets/js/126.c6b6b51a.js"><link rel="prefetch" href="/assets/js/127.c0c6173a.js"><link rel="prefetch" href="/assets/js/128.596744f0.js"><link rel="prefetch" href="/assets/js/129.52675432.js"><link rel="prefetch" href="/assets/js/13.27562c3a.js"><link rel="prefetch" href="/assets/js/130.046cbb37.js"><link rel="prefetch" href="/assets/js/131.77fe5805.js"><link rel="prefetch" href="/assets/js/132.ddaf01b1.js"><link rel="prefetch" href="/assets/js/133.7b572704.js"><link rel="prefetch" href="/assets/js/134.a5bb753b.js"><link rel="prefetch" href="/assets/js/135.0b06c726.js"><link rel="prefetch" href="/assets/js/136.42a5ef49.js"><link rel="prefetch" href="/assets/js/137.12f7f4dd.js"><link rel="prefetch" href="/assets/js/138.264e490a.js"><link rel="prefetch" href="/assets/js/139.bad5c759.js"><link rel="prefetch" href="/assets/js/14.dc51ffe2.js"><link rel="prefetch" href="/assets/js/140.0101e64d.js"><link rel="prefetch" href="/assets/js/141.3f5dcc75.js"><link rel="prefetch" href="/assets/js/142.dc421e7a.js"><link rel="prefetch" href="/assets/js/143.f36e30af.js"><link rel="prefetch" href="/assets/js/144.fb7c9a46.js"><link rel="prefetch" href="/assets/js/145.bee49609.js"><link rel="prefetch" href="/assets/js/146.aeaddf99.js"><link rel="prefetch" href="/assets/js/147.e2017cca.js"><link rel="prefetch" href="/assets/js/148.c5bef4c6.js"><link rel="prefetch" href="/assets/js/149.2cbfeae5.js"><link rel="prefetch" href="/assets/js/15.4812fd27.js"><link rel="prefetch" href="/assets/js/150.7b3aad9a.js"><link rel="prefetch" href="/assets/js/151.809252f7.js"><link rel="prefetch" href="/assets/js/152.5e8565a8.js"><link rel="prefetch" href="/assets/js/153.cc80c8db.js"><link rel="prefetch" href="/assets/js/154.0fc42f42.js"><link rel="prefetch" href="/assets/js/155.1697681c.js"><link rel="prefetch" href="/assets/js/156.f6421d21.js"><link rel="prefetch" href="/assets/js/157.7b90b7b5.js"><link rel="prefetch" href="/assets/js/158.de953b27.js"><link rel="prefetch" href="/assets/js/159.bc40b166.js"><link rel="prefetch" href="/assets/js/16.cd7c3771.js"><link rel="prefetch" href="/assets/js/160.c7814b2b.js"><link rel="prefetch" href="/assets/js/161.0a57399a.js"><link rel="prefetch" href="/assets/js/162.79baf973.js"><link rel="prefetch" href="/assets/js/163.9a1f3202.js"><link rel="prefetch" href="/assets/js/164.353103d9.js"><link rel="prefetch" href="/assets/js/165.6bc61007.js"><link rel="prefetch" href="/assets/js/166.7895afb8.js"><link rel="prefetch" href="/assets/js/167.692082b5.js"><link rel="prefetch" href="/assets/js/168.4781ef85.js"><link rel="prefetch" href="/assets/js/169.8538eee4.js"><link rel="prefetch" href="/assets/js/17.49eafbb6.js"><link rel="prefetch" href="/assets/js/170.dd5b9669.js"><link rel="prefetch" href="/assets/js/171.e670b681.js"><link rel="prefetch" href="/assets/js/172.30df864d.js"><link rel="prefetch" href="/assets/js/173.6113670d.js"><link rel="prefetch" href="/assets/js/174.8ed484e2.js"><link rel="prefetch" href="/assets/js/175.5c90b7ba.js"><link rel="prefetch" href="/assets/js/176.bc2e45bd.js"><link rel="prefetch" href="/assets/js/177.fe48b207.js"><link rel="prefetch" href="/assets/js/179.553448de.js"><link rel="prefetch" href="/assets/js/18.ea171268.js"><link rel="prefetch" href="/assets/js/180.769bb573.js"><link rel="prefetch" href="/assets/js/181.8e4552c5.js"><link rel="prefetch" href="/assets/js/182.9761430c.js"><link rel="prefetch" href="/assets/js/183.082e811d.js"><link rel="prefetch" href="/assets/js/184.c167f336.js"><link rel="prefetch" href="/assets/js/185.8f32c842.js"><link rel="prefetch" href="/assets/js/186.5f2ff328.js"><link rel="prefetch" href="/assets/js/187.6de4cc20.js"><link rel="prefetch" href="/assets/js/188.e388d882.js"><link rel="prefetch" href="/assets/js/189.f52cefaa.js"><link rel="prefetch" href="/assets/js/19.d5f74352.js"><link rel="prefetch" href="/assets/js/190.c015f68f.js"><link rel="prefetch" href="/assets/js/20.c85370a3.js"><link rel="prefetch" href="/assets/js/21.6d096356.js"><link rel="prefetch" href="/assets/js/22.b08eb7e0.js"><link rel="prefetch" href="/assets/js/23.098f1ac5.js"><link rel="prefetch" href="/assets/js/24.96d1e6e6.js"><link rel="prefetch" href="/assets/js/25.69e73744.js"><link rel="prefetch" href="/assets/js/26.4aacb5c1.js"><link rel="prefetch" href="/assets/js/27.2df4926d.js"><link rel="prefetch" href="/assets/js/28.a7f4c564.js"><link rel="prefetch" href="/assets/js/29.e6b2c078.js"><link rel="prefetch" href="/assets/js/3.e3f1b501.js"><link rel="prefetch" href="/assets/js/30.293341de.js"><link rel="prefetch" href="/assets/js/31.5b49b4d4.js"><link rel="prefetch" href="/assets/js/32.0061bb69.js"><link rel="prefetch" href="/assets/js/33.0f17e027.js"><link rel="prefetch" href="/assets/js/34.f5dae4f0.js"><link rel="prefetch" href="/assets/js/35.0f6db645.js"><link rel="prefetch" href="/assets/js/36.6d88157c.js"><link rel="prefetch" href="/assets/js/37.7b63a8c7.js"><link rel="prefetch" href="/assets/js/38.0ebf6d81.js"><link rel="prefetch" href="/assets/js/39.30b3a587.js"><link rel="prefetch" href="/assets/js/4.9cd35a0b.js"><link rel="prefetch" href="/assets/js/40.2151fb6c.js"><link rel="prefetch" href="/assets/js/41.d567b987.js"><link rel="prefetch" href="/assets/js/42.d7c30226.js"><link rel="prefetch" href="/assets/js/43.3be40283.js"><link rel="prefetch" href="/assets/js/44.d16c1776.js"><link rel="prefetch" href="/assets/js/45.e530ad74.js"><link rel="prefetch" href="/assets/js/46.b9346c31.js"><link rel="prefetch" href="/assets/js/47.fc4881ab.js"><link rel="prefetch" href="/assets/js/48.81663997.js"><link rel="prefetch" href="/assets/js/49.d3f74e53.js"><link rel="prefetch" href="/assets/js/5.f9d6ad53.js"><link rel="prefetch" href="/assets/js/50.31793dc1.js"><link rel="prefetch" href="/assets/js/51.df87964d.js"><link rel="prefetch" href="/assets/js/52.a9d4b0f0.js"><link rel="prefetch" href="/assets/js/53.df8690a4.js"><link rel="prefetch" href="/assets/js/54.6880d9e6.js"><link rel="prefetch" href="/assets/js/55.df4441e7.js"><link rel="prefetch" href="/assets/js/56.f18cabea.js"><link rel="prefetch" href="/assets/js/57.e12d025d.js"><link rel="prefetch" href="/assets/js/58.08d812ab.js"><link rel="prefetch" href="/assets/js/59.d81d6d05.js"><link rel="prefetch" href="/assets/js/6.83abd156.js"><link rel="prefetch" href="/assets/js/60.cb00b6c5.js"><link rel="prefetch" href="/assets/js/61.4dead28d.js"><link rel="prefetch" href="/assets/js/62.1651aecc.js"><link rel="prefetch" href="/assets/js/63.49afe57f.js"><link rel="prefetch" href="/assets/js/64.ffd69c1f.js"><link rel="prefetch" href="/assets/js/65.dae6357a.js"><link rel="prefetch" href="/assets/js/66.63f2d3ed.js"><link rel="prefetch" href="/assets/js/67.7076b9a4.js"><link rel="prefetch" href="/assets/js/68.b22bcd3f.js"><link rel="prefetch" href="/assets/js/69.033db5fa.js"><link rel="prefetch" href="/assets/js/7.7ad3d79d.js"><link rel="prefetch" href="/assets/js/70.9affc24a.js"><link rel="prefetch" href="/assets/js/71.3a37921f.js"><link rel="prefetch" href="/assets/js/72.cea5729d.js"><link rel="prefetch" href="/assets/js/73.99ec9c15.js"><link rel="prefetch" href="/assets/js/74.23164362.js"><link rel="prefetch" href="/assets/js/75.f01fdfdb.js"><link rel="prefetch" href="/assets/js/76.a4b66f24.js"><link rel="prefetch" href="/assets/js/77.7eb7460d.js"><link rel="prefetch" href="/assets/js/78.1f919b39.js"><link rel="prefetch" href="/assets/js/79.de000184.js"><link rel="prefetch" href="/assets/js/8.18922c3e.js"><link rel="prefetch" href="/assets/js/80.6259f5be.js"><link rel="prefetch" href="/assets/js/81.5bec1644.js"><link rel="prefetch" href="/assets/js/82.801f08b8.js"><link rel="prefetch" href="/assets/js/83.1574b520.js"><link rel="prefetch" href="/assets/js/84.92bc4d2d.js"><link rel="prefetch" href="/assets/js/85.fb1df670.js"><link rel="prefetch" href="/assets/js/86.09ca4cc5.js"><link rel="prefetch" href="/assets/js/87.adbfde0a.js"><link rel="prefetch" href="/assets/js/88.f9a44acf.js"><link rel="prefetch" href="/assets/js/89.d8bdb4e6.js"><link rel="prefetch" href="/assets/js/9.69d52509.js"><link rel="prefetch" href="/assets/js/90.706a6473.js"><link rel="prefetch" href="/assets/js/91.0c4f8a41.js"><link rel="prefetch" href="/assets/js/92.aeee86f2.js"><link rel="prefetch" href="/assets/js/93.f5feedf8.js"><link rel="prefetch" href="/assets/js/94.52dcd6be.js"><link rel="prefetch" href="/assets/js/95.18b802b4.js"><link rel="prefetch" href="/assets/js/96.c317dec0.js"><link rel="prefetch" href="/assets/js/97.1baa77b7.js"><link rel="prefetch" href="/assets/js/98.c566e725.js"><link rel="prefetch" href="/assets/js/99.315d3c8c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c1092872.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Wind</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/javascript/" class="nav-link">
  现代JS教程📝
</a></div><div class="nav-item"><a href="https://github.com/wind8866" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/javascript/" class="nav-link">
  现代JS教程📝
</a></div><div class="nav-item"><a href="https://github.com/wind8866" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="文档笔记"><a href="#文档笔记" class="header-anchor">#</a> 文档笔记</h1> <h1 id="实例代码"><a href="#实例代码" class="header-anchor">#</a> 实例代码</h1> <p>/items/react-doc</p> <h2 id="文档笔记-2"><a href="#文档笔记-2" class="header-anchor">#</a> 文档笔记</h2> <p>JSX也是一种表达式<br>
组件的状态名，应以组件自身的角度命名，不应该依赖调用者。<br>
如果一部分 UI 足够复杂或组件可被多次使用，那么他应该被独立成组件<br>
所有的 React 组件必须像纯函数一样保护他的 props 不被修改。<br>
不参与数据流的值可以放在 <code>this</code> 对象里。<br>
不要直接修改 this.state<br>
📌<strong>State 的更新可能是异步，setState传入函数可同步更新。</strong><br>
State 的更新会被合并，只需使用setState更新需要修改的部分即可。<br>
React 是自上而下的单向数据流。<br>
阻止浏览器默认事件使用<code>e.preventDefault()</code><br>
&amp;&amp; 与 || 都会阻断执行，&amp;&amp; 前面的值转化为 true 才执行并返回后面的代码，|| 前面值转化为为 false 才会执行后面的代码。也可以用 ES6 中的 ?? 操作符。<br>
区分受控组件与非受控组件的方法是 value 是否为 null 或 undefined，若是，则是非受控组件。所以受控组件的 value 值应该是空字符串。<br>
多个组件需要反映相同的变化数据，应该将共享状态提升到最近的共同父组件中去。<br>
在 React 应用中，任何可变数据应当只有一个相对应的唯一“数据源”。<br>
📌<strong>组件可以作为参数传递给子组件</strong><br> <a href="https://zh-hans.reactjs.org/docs/composition-vs-inheritance.html#specialization" target="_blank" rel="noopener noreferrer">特例关系<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：“特殊”组件可以通过 props 定制并渲染“一般”组件。<br>
React中不会用到继承，都是组合。<br>
使用 <code>&lt;React.Fragment&gt;</code> 或 <code>&lt;&gt;</code> 可设置一个空的包含组件。</p> <p><strong>高阶组件</strong><br>
📌高阶组件（HOC）是参数为组件，返回值为新组件的函数。<br>
HOC 不会修改传入的组件，也不会使用继承来复制其行为。相反，HOC 通过将组件包装在容器组件中来组成新组件。HOC 是纯函数，没有副作用。<br>
HOC 不需要关心数据的使用方式或原因，而被包装组件也不需要关心数据是怎么来的。<br>
HOC 是一种基于 React 的组合特性而形成的设计模式。</p> <p><strong>性能优化：</strong></p> <ul><li>使用Create React App，生产环境打包、使用 Brunch、envify、uglifyify、terser 进行打包。</li> <li>对长列表使用虚拟滚动器。</li> <li>📌在特定情况下，在 <code>shouldComponentUpdate</code> 生命周期返回false进行拦截，使其不进行render。</li> <li>工具：<a href="https://zh-hans.reactjs.org/docs/optimizing-performance.html#profiling-components-with-the-chrome-performance-tab" target="_blank" rel="noopener noreferrer">使用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>React的Chrome插件可以监控组件渲染的时机，用于进行性能优化。<br>
可以使用 React.PureComponent 替代手动的 shouldComponentUpdate 生命周期渲染拦截。该对比使用浅比较</li></ul> <p>因为JSX会被编译为 <code>React.createElement</code>，所以必须在文件头部引入 <code>React</code> 。<br>
📌Portal 提供了一种将子节点渲染到存在于父组件以外的 DOM 节点的优秀的方案。使用 <code>ReactDOM.createPortal(child, container)</code> 可以创建<br>
📌只要在React的DOM树中存在父子关系，父元素即可以捕获子元素触发的冒泡事件。<br>
📌Context 主要应用场景在于很多不同层级的组件需要访问同样一些的数据。请谨慎使用，因为这会使得组件的复用性变差，可以使用Hooks替代。<br>
如果一个很深的组件需要顶层组件传递参数，为了避免属性特别多且层层传递的问题，一种比较好的设计方式是将很深的组件放在顶层组件中，将该组件层层传递。但带来的问题是顶层组件会变得复杂。<br>
Context 的值中尽量不要传递对象，传递可能会<a href="https://zh-hans.reactjs.org/docs/context.html#caveats" target="_blank" rel="noopener noreferrer">触发意外渲染<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。<br>
📌一个良好的软件应该有明确的错误反馈，使用错误边界可以 catch 到一些意外的错误情况。<br>
📌自 React 16 起，任何未被错误边界捕获的错误将会导致整个 React 组件树被卸载。（测试错误会向上传递，导致所有的程序都出现错误而被 React 移除）<br>
使用 React 边界捕获无法捕获：事件处理、异步代码、服务端渲染、组件自身抛出的错误。</p> <p><strong>适合使用Ref的情况：</strong><br>
在非必要情况下，不要使用Ref。</p> <ul><li>管理焦点，文本选择或媒体播放。</li> <li>触发强制动画。</li> <li>集成第三方 DOM 库。</li></ul> <p>默认你不能在函数组件上使用 ref 属性，因为它们没有实例。<br>
📌Ref 转发使组件可以像暴露自己的 ref 一样暴露子组件的 ref。<br>
Ref 不仅可以传递 dom，可以传递其他数据（优先使用状态）。</p> <p>📌<strong>diff算法的设计</strong></p> <ul><li>在某一时间节点调用 React 的 render() 方法，会创建一棵由 React 元素组成的树。在下一次 state 或 props 更新时，相同的 render() 方法会返回一棵不同的树。React 需要基于这两棵树之间的差别来判断如何有效率的更新 UI 以保证当前 UI 与最新的树保持同步。</li> <li>因为算法复杂度的问题，react 设计了一套 O(n) 复杂度的算法，这个算法有两个前提。
<ul><li>两个不同类型的元素会产生出不同的树</li> <li>开发者可以通过 key 来暗示哪些子元素在不同的渲染下能保持稳定</li></ul></li></ul> <p>不同类型的元素，即使子元素是完全一样的，在dom更换时，子元素仍然会重新渲染。所以应该尽量避免这种情况。<br>
渲染逻辑<br>
1、对比不同类型的元素时，React 会拆卸原有的树并且建立起新的树。<br>
2、对比同一元素，尽可能的最小化更新该元素的属性。<br>
3、对比同类型的组件，组件实例不变，仅传入当前状态的 props，然后调用该实例的 componentWillReceiveProps() 和 componentWillUpdate() 方法。在 render() 时进行diff的计算，并根据计算更新 dom。=<br>
4、对没有使用 key 的子节点进行递归时，对变化前后的两个 dom 树的值逐个比较，在最后插入元素开销较小，在开始插入元素，开销最大。（有点像数组）<br>
5、对子节点进行递归，key 的作用体现出来，key 标记了数据与某个 dom 节点的对应关系。使得diff能够更精确的对比，dom 更新更精确的最小化。</p> <p><strong>render prop</strong><br>
术语 “render prop” 是指一种在 React 组件之间使用一个值为函数的 prop 共享代码的简单技术。<br>
使用 Render Props 来解决横切关注点（Cross-Cutting Concerns）<br>
任何被用于告知组件需要渲染什么内容的函数 prop 在技术上都可以被称为 “render prop”.<br>
Render Props 是一种实现方式，给组件传入一个函数，该函数在组件内部执行，返回JSX，该组件中封装了方法，状态，其中状态可以返回给函数。这就相当于一个完整的组件，组件内部的一部分内容你可以自己定义，我会给你一些数据。不使用组件参数，使用子元素同样能实现该功能。</p> <p>可以使用<code>&lt;React.StrictMode&gt;</code>开启严格模式，用于检查过时 API、ref 副作用等等问题。<br>
如果你不介意代码美观性，并且希望快速编写代码，使用非受控组件往往可以减少你的代码量。否则，你应该使用受控组件。<br>
react 中的事件都是在冒泡阶段触发的，如需注册捕获阶段的事件处理函数，则应为事件名添加 Capture。例如，处理捕获阶段的点击事件请使用 onClickCapture，而不是 onClick。</p> <p><a href="https://zh-hans.reactjs.org/docs/dom-elements.html" target="_blank" rel="noopener noreferrer"><strong>react 中的替代：</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
在 React 中，所有的 DOM 特性和属性（包括事件处理）都应该是小驼峰命名的方式。例外的情况是 aria-* 以及 data-* 属性，一律使用小写字母命名。<br>
特殊：</p> <ul><li>checkbox 受控 checkbox，defaultChecked 非受控默认值</li> <li>class 替换为 classname</li> <li>dangerouslySetInnerHTML 为 innerHTML 替代方案</li> <li>htmlFor代替for</li> <li>onChange，react修改了onChange行为。</li> <li>select 内的 selected 使用 value 替代</li> <li>style，修改了默认行为，React 会自动添加 ”px” 后缀到内联样式为数字的属性后。</li> <li>value 为受控值，非受控组件使用 defaultValue 为表单元素设置默认值。</li> <li>textarea 内的值使用 value 属性替代</li></ul> <h2 id="demo"><a href="#demo" class="header-anchor">#</a> Demo</h2> <p>在另一个项目：</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/4/2021, 4:20:48 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2e3db3d9.js" defer></script><script src="/assets/js/2.65dda3ac.js" defer></script><script src="/assets/js/178.6234883e.js" defer></script>
  </body>
</html>
